<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Lord of the Rings Top/Bottom Timeline</title>
  <link rel="stylesheet" href="../build/d3-milestones.css">
  <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style>
    body {
      font-family: sans-serif;
    }

    h1 {
      font-size: 1.5em;
    }

    #timeline {
      height: 800px;
      width: 100%;
    }
</style>
</head>

<body id="home">
  <h1>Lord of the Rings Top/Bottom Timeline</h2>
    <div style="margin: 50px 50px 0px 50px">
      <div id="timeline-gandalf"></div>
      <div id="timeline-frodo" style="margin-top: -180px"></div>
    </div>
  <script src="../build/d3-milestones.js"></script>
  <script>
    // via https://scifi.stackexchange.com/questions/7304/what-is-the-timeline-for-the-lord-of-the-rings-trilogy
    data = [
      { timestamp: '12.04.3018', character: 'Gandalf', text: 'Gandalf reaches Hobbiton. Tells Frodo about the ring.' },
      { timestamp: '12.04.3018', character: 'Frodo', text: 'Gandalf tells Frodo about the ring.' },
      { timestamp: '30.06.3018', character: 'Gandalf', text: 'Gandalf leaves Hobbiton. Leaves for Isengard.' },
      { timestamp: '20.07.3018', character: 'Gandalf', text: 'Gandalf imprisoned in Orthanc by Saruman.' },
      { timestamp: '18.09.3018', character: 'Gandalf', text: 'Gandalf escapes from Orthanc.' },
      { timestamp: '19.09.3018', character: 'Gandalf', text: 'Gandalf comes to Edoras.' },
      { timestamp: '22.09.3018', character: 'Frodo', text: 'Frodo\'s birthday party.' },
      { timestamp: '23.09.3018', character: 'Frodo', text: 'Fatty and Merry leave in the morning. Frodo, Sam and Pippin in the evening.' },
      { timestamp: '23.09.3018', character: 'Gandalf', text: 'Gandalf tames Shadowfax and rides to Hobbiton.' },
      // { timestamp: '25.09.3018', character: 'Frodo', text: 'The hobbits reunite in Crickhollow.' },
      { timestamp: '26.09.3018', character: 'Frodo', text: 'The hobbits stay with Tom Bombadil.' },
      // { timestamp: '28.09.3018', character: 'Frodo', text: 'Captured by Barrow-wight. Rescued by Tom Bombadil.' },
      { timestamp: '29.09.3018', character: 'Gandalf', text: 'Gandalf reaches Hobbiton.' },
      // { timestamp: '29.09.3018', character: 'Frodo', text: 'Arrival at Bree. Meeting with Strider.' },
      { timestamp: '30.09.3018', character: 'Frodo', text: 'Hobbits and Strider leave Bree in the morning.' },
      { timestamp: '01.10.3018', character: 'Gandalf', text: 'Gandalf leaves Bree.' },
      { timestamp: '03.10.3018', character: 'Gandalf', text: 'Gandalf attacked on Weathertop.' },
      // { timestamp: '06.10.3018', character: 'Frodo', text: 'Camp attacked at night. Frodo wounded.' },
      { timestamp: '13.10.3018', character: 'Frodo', text: 'Group crosses the bridge of Mithreidel.' },
      { timestamp: '18.10.3018', character: 'Gandalf', text: 'Gandalf reaches Rivendell.' },
      { timestamp: '18.10.3018', character: 'Frodo', text: 'Glorfindel finds Frodo at dusk.' },
      // { timestamp: '20.10.3018', character: 'Frodo', text: 'Frodo escapes the Ford of Bruinen. Arrival in Rivendell.' },
      // { timestamp: '24.10.3018', character: 'Frodo', text: 'Frodo awakes in Rivendell.' },
      { timestamp: '25.10.3018', character: 'Gandalf', text: 'The Council of Elrond.' },
      // { timestamp: '25.10.3018', character: 'Frodo', text: 'The Council of Elrond.' },
      { timestamp: '31.12.3018', character: 'Gandalf', text: 'The fellowship leaves Rivendell at dawn.' },
      { timestamp: '31.12.3018', character: 'Frodo', text: 'The fellowship leaves Rivendell at dawn.' },
    ];

    // Timeline for Gandalf with label at the top
    var timeline = milestones('#timeline-gandalf')
      .distribution('top')
      .parseTime('%d.%m.%Y')
      .aggregateBy('day')
      .optimize(true)
      .render(data.filter(d => d.character === 'Gandalf'));

    // Timeline for Frodo with label at the top
    var timeline = milestones('#timeline-frodo')
      .distribution('bottom')
      .parseTime('%d.%m.%Y')
      .aggregateBy('day')
      .optimize(true)
      .render(data.filter(d => d.character === 'Frodo'));

</script>
</body>
</html>
